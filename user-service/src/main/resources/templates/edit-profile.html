<meta charset="UTF-8" />
<h4>编辑信息</h4>
<form id="editProfileForm">
  <input type="hidden" id="userId" />
  <label>姓名：</label><input type="text" id="name" /><br/>
  <label>性别：</label><select id="gender">
  <option value="男">男</option>
  <option value="女">女</option>
</select><br/>
  <label>生日：</label><input type="date" id="birthday" /><br/>
  <label>学历：</label><input type="text" id="education" /><br/>
  <label>经验：</label><textarea id="experience"></textarea><br/>
  <label>技能：</label><textarea id="skills"></textarea><br/>
  <button type="submit">保存</button>
</form>

<script>
  const currentUserId = 123;  // 这里改成实际用户ID

  // 页面加载时，获取用户信息填充表单
  $(function() {
    $.ajax({
      url: `/candidate/${currentUserId}`,
      method: 'GET',
      success: function(data) {
        if (data) {
          $('#userId').val(data.userId);
          $('#name').val(data.name);
          $('#gender').val(data.gender);
          $('#birthday').val(data.birthday ? data.birthday.split('T')[0] : '');
          $('#education').val(data.education);
          $('#experience').val(data.experience);
          $('#skills').val(data.skills);
        }
      }
    });
  });

  // 提交表单
  $('#editProfileForm').submit(function(e) {
    e.preventDefault();

    const candidate = {
      userId: $('#userId').val(),
      name: $('#name').val(),
      gender: $('#gender').val(),
      birthday: $('#birthday').val(),
      education: $('#education').val(),
      experience: $('#experience').val(),
      skills: $('#skills').val()
    };

    let url = candidate.userId ? '/candidate/update' : '/candidate/save';

    $.ajax({
      url: url,
      method: 'POST',
      contentType: 'application/json',
      data: JSON.stringify(candidate),
      success: function(res) {
        alert(res);
      },
      error: function() {
        alert('请求失败');
      }
    });
  });
</script>
